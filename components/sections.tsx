/* eslint-disable @next/next/no-img-element */
"use client";
import { useEffect, useState } from "react";
import { CartLoader, ProductCard, VariantCard } from "./cards";
import { getProductsByBrand } from "../app/action";
import { CollectionWithProducts } from "../repositories/collection.repository";
import Link from "next/link";

export function HomeProdudctsSection({brand, title, description, color, bgColor}:{brand: string, title: string, description: string, color?: string, bgColor?: string}){
    const [brandProducts, setBrandProducts] = useState([]);
    const [icon, setIcon] = useState(null);
    useEffect(()=>{
        getProductsByBrand(brand).then((data) => {
            setBrandProducts(data);
            console.log(`${brand} Products:`,data);
        });
        switch(brand.toLocaleLowerCase()){
            case "nike":
                setIcon(<svg style={{fill: color}} className={`h-16 fill-${color}`} role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Nike</title><path d="M24 7.8L6.442 15.276c-1.456.616-2.679.925-3.668.925-1.12 0-1.933-.392-2.437-1.177-.317-.504-.41-1.143-.28-1.918.13-.775.476-1.6 1.036-2.478.467-.71 1.232-1.643 2.297-2.8a6.122 6.122 0 00-.784 1.848c-.28 1.195-.028 2.072.756 2.632.373.261.886.392 1.54.392.522 0 1.11-.084 1.764-.252L24 7.8z"/></svg>);
                break;
            case "new balance":
                setIcon(<svg style={{fill: color}} className={`h-16 fill-${color}`} role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>New Balance</title><path d="M12.169 10.306l1.111-1.937 3.774-.242.132-.236-3.488-.242.82-1.414h6.47c1.99 0 3.46.715 2.887 2.8-.17.638-.979 2.233-3.356 2.899.507.06 1.76.616 1.54 2.057-.384 2.558-3.69 3.774-5.533 3.774l-7.641.006-.38-1.48 4.005-.28.137-.237-4.346-.264-.467-1.755 6.178-.363.137-.231-11.096-.693.534-.925 11.948-.775.138-.231-3.504-.231m5 .385l1.1-.006c.738-.005 1.502-.34 1.783-1.018.259-.632-.088-1.171-.55-1.166h-1.067l-1.266 2.19zm-1.27 2.195l-1.326 2.305h1.265c.589 0 1.64-.292 1.964-1.128.302-.781-.253-1.177-.638-1.177h-1.266zM6.26 16.445l-.77 1.315L0 17.77l.534-.923 5.726-.402zm.385-10.216l4.417.006.336 1.248-5.276-.33.523-.924zm5 2.245l.484 1.832-7.542-.495.528-.92 6.53-.417zm-3.84 5.281l-.957 1.661-5.32-.302.534-.924 5.743-.435z"/></svg>);
                break;
            case "adidas":
                setIcon(<svg style={{fill: color}} className={`h-16 fill-${color}`} role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Adidas</title><path d="m24 19.535-8.697-15.07-4.659 2.687 7.145 12.383Zm-8.287 0L9.969 9.59 5.31 12.277l4.192 7.258ZM4.658 14.723l2.776 4.812H1.223L0 17.41Z"/></svg>);
                break;
            case "puma":
                setIcon(<svg style={{fill: color}} role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Puma</title><path d="M23.845 3.008c-.417-.533-1.146-.106-1.467.08-2.284 1.346-2.621 3.716-3.417 5.077-.626 1.09-1.652 1.89-2.58 1.952-.686.049-1.43-.084-2.168-.405-1.807-.781-2.78-1.792-3.017-1.97-.487-.37-4.23-4.015-7.28-4.164 0 0-.372-.75-.465-.763-.222-.025-.45.451-.616.501-.15.053-.413-.512-.565-.487-.153.02-.302.586-.6.877-.22.213-.486.2-.637.463-.052.096-.034.265-.093.42-.127.32-.551.354-.555.697 0 .381.357.454.669.72.248.212.265.362.554.461.258.088.632-.187.964-.088.277.081.543.14.602.423.054.256 0 .658-.34.613-.112-.015-.598-.174-1.198-.11-.725.077-1.553.309-1.634 1.11-.041.447.514.97 1.055.866.371-.071.196-.506.399-.716.267-.27 1.772.944 3.172.944.593 0 1.031-.15 1.467-.605.04-.029.093-.102.155-.11a.632.632 0 01.195.088c1.131.897 1.984 2.7 6.13 2.721.582.007 1.25.279 1.796.777.48.433.764 1.125 1.037 1.825.418 1.053 1.161 2.069 2.292 3.203.06.068.99.78 1.06.833.012.01.084.167.053.255-.02.69-.123 2.67 1.365 2.753.366.02.275-.231.275-.41-.005-.341-.065-.685.113-1.04.253-.478-.526-.709-.509-1.756.019-.784-.645-.651-.984-1.25-.19-.343-.368-.532-.35-.946.073-2.38-.517-3.948-.805-4.327-.227-.294-.423-.403-.207-.54 1.24-.815 1.525-1.574 1.525-1.574.66-1.541 1.256-2.945 2.075-3.57.166-.12.589-.44.852-.56.763-.362 1.173-.578 1.388-.788.356-.337.635-1.053.294-1.48z"/></svg>);
            case "reebook":
                setIcon(<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Reebok</title><path d="M14.991 11.48C17.744 10.38 19.458 9.748 24 8.64c-2.467.163-7.922.537-11.682 1.271l2.673 1.57m-8.56 3.651h3.6c.713-1.08 1.422-1.606 2.248-2.191a71.382 71.382 0 00-1.892-.701c-2.297 1.014-3.575 2.375-3.953 2.892m.709-3.928c-3.21 1.147-4.994 2.393-6.199 3.928h3.975c.387-.539 1.862-2.093 4.633-3.174a57.092 57.092 0 00-2.41-.754M8.79 8.788H0c8.862 1.6 13.133 3.66 20 6.572-.587-.439-10.051-6.013-11.209-6.572"/></svg>)
                break;
            case "fila":
                setIcon(<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Fila</title><path d="M8.814 8.027c-.614 0-1.113.498-1.113 1.113v5.72a1.113 1.113 0 0 0 2.226 0V9.14c0-.614-.498-1.113-1.113-1.113m-2.849.078H1.113a1.113 1.113 0 0 0 0 2.226h4.852a1.113 1.113 0 0 0 0-2.226m17.411 4.417L21.03 8.705c-.275-.444-.65-.658-1.125-.658-.488 0-.904.229-1.162.658l-2.715 4.5c-.186.308-.4.436-.753.436h-2.019a.275.275 0 0 1-.285-.284V9.102c0-.613-.497-1.075-1.11-1.075-.614 0-1.11.463-1.11 1.076v5.215c0 .784.774 1.544 1.544 1.544h4.064c.576 0 .963-.42 1.292-.996l2.114-3.627c.018-.04.053-.091.093-.091.043 0 .07.051.091.088l1.384 2.22c.058.094.069.141.032.225-.033.077-.108.093-.23.093h-1.943a1.044 1.044 0 1 0 0 2.088h3.17c.77 0 1.638-.734 1.638-1.693 0-.608-.117-.822-.624-1.647M5.431 10.954H1.113c-.615 0-1.113.498-1.113 1.113v2.715a1.113 1.113 0 1 0 2.226 0v-1.268c0-.185.15-.334.334-.334h2.87a1.113 1.113 0 0 0 0-2.226"/></svg>);
                break;
            case "converse":
                setIcon(<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Coveralls</title><path d="M0 12v12h24V0H0zm13.195-6.187l1.167 3.515 2.255.005c1.238.005 2.916.019 3.727.037l1.472.028-2.968 2.152c-1.63 1.181-2.976 2.18-2.99 2.212-.01.033.487 1.627 1.106 3.54.619 1.917 1.12 3.487 1.116 3.492-.005.01-1.35-.947-2.986-2.119-1.636-1.177-3-2.147-3.033-2.161-.028-.01-1.411.947-3.07 2.138-1.655 1.185-3.02 2.151-3.024 2.142-.004-.005.497-1.575 1.116-3.492.619-1.913 1.115-3.507 1.106-3.54-.014-.032-1.36-1.03-2.99-2.212L2.23 9.398l1.472-.028c.811-.018 2.49-.032 3.727-.037l2.254-.005 1.168-3.515a512.54 512.54 0 011.171-3.516c.005 0 .53 1.58 1.172 3.516z"/></svg>)
                break;
            case "jordan":
                setIcon(<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Jordan</title><path d="M13.55 2.194v-.075c0-.35.113-.663.338-.938.225-.275.512-.412.862-.412s.663.112.938.337.425.525.45.9c.025.375-.088.688-.338.938s-.55.375-.9.375l-.225.075.075.112-.075.413-.15 1.2c.05.05.075.1.075.15l-.15.75c-.05.1-.1.175-.15.225l-.075.3a22.59 22.59 0 01-.45 1.575v.15c-.05.25-.087.45-.112.6-.025.15-.113.4-.263.75-.1.2-.1.525 0 .975l.075.075c0 .15.063.325.188.525s.187.375.187.525c.05 1-.025 1.85-.225 2.55l.15.45c.6.3.775.625.525.975l.375.15c.6.3 1.025.562 1.275.787.25.225.5.463.75.713.2.05.35.125.45.225l.225.075c1.05.7 2.1 1.55 3.15 2.55l.3.225v.075l-.075.15.225.15h.075c.15.1.25.15.3.15h.075c.05 0 .1-.025.15-.075l.15-.075c.1-.1.2-.175.3-.225h.3c.05 0 .05.025 0 .075l-.3.15-.375.45h.525l.525.075c.15-.05.275-.1.375-.15l.375-.225c.15-.05.3 0 .45.15h.075c.05.05.025.125-.075.225l-.9.825c-.25.2-.475.325-.675.375l-.975.675c-.05.05-.1.05-.15 0l-.225-.3-.15-.3-.188-.263-.225-.3-.187-.225-.15-.187-.3-.225c-.1 0-.2-.025-.3-.075l-.975-.75c-.15 0-.325-.075-.525-.225-.75-.65-1.25-1.05-1.5-1.2l-.45-.3-.9-.15c-.3-.05-.7-.2-1.2-.45l-.6-.3c-.4-.2-.675-.3-.825-.3l-.3-.15c-.2-.05-.35-.1-.45-.15l-.15-.15c-.1 0-.2.025-.3.075l-1.5.75-1.875.825c-.5.4-.975.725-1.425.975l-.825.375-1.275.9c-.1.1-.2.1-.3 0l-.15.15c-.15.05-.25.075-.3.075l-.3.15v.15H3.2l-.15.225c-.1.2-.2.312-.3.337-.1.025-.162.063-.187.113a.434.434 0 01-.075.112l-.15.15-.225.15-.338-.037-.45.075-.3.075c-.25.05-.45.012-.6-.113-.15-.125-.275-.312-.375-.562-.1-.15-.05-.275.15-.375l.075-.075c.05-.05.125-.075.225-.075h.45l.6-.225.3-.075c0-.1.025-.175.075-.225.05-.05.125-.075.225-.075v-.075a.666.666 0 01-.075-.3c-.05-.1-.063-.175-.037-.225.025-.05.05-.075.075-.075h.037l.075.225c.05.25.125.325.225.225l.075-.15c.05-.1.125-.15.225-.15l.15.15.15-.15-.075-.075c0-.05.025-.075.075-.075l.3-.3c.25-.3.55-.575.9-.825.7-.55 1.45-.975 2.25-1.275.25-.25.525-.375.825-.375.2-.35.5-.725.9-1.125.35-.25.6-.425.75-.525.1-.2.225-.3.375-.3h.075l.15-.15c.1-.05.175-.1.225-.15v-.375c0-.25.025-.45.075-.6.05-.15.175-.225.375-.225l.3-.3c-.1-.2-.15-.425-.15-.675h-.075c-.1-.15-.15-.3-.15-.45-.15-.25-.25-.45-.3-.6H9.65c-.05.15-.175.25-.375.3l-.075.15c-.2.35-.375.612-.525.787-.15.175-.425.388-.825.638-.25.25-.425.525-.525.825-.05.15-.05.3 0 .45l-.075.15h.075c0 .1.025.15.075.15h.075c.1.05.15.112.15.187s-.075.1-.225.075a.606.606 0 01-.337-.15c-.075-.075-.138-.112-.188-.112l-.225.225c-.1.15-.2.212-.3.187-.1-.025-.125-.062-.075-.112l.075-.075c.05-.1.05-.15 0-.15l-.6.15c-.05.05-.112.05-.187 0s-.063-.1.037-.15l.375-.15c0-.05-.025-.075-.075-.075-.2.1-.4.125-.6.075l-.375-.075-.075-.075c0-.05.025-.075.075-.075.2.05.45.025.75-.075l.525-.225.6-.675.075-.15c.2-.4.413-.763.638-1.088a3.68 3.68 0 01.712-.787l.075-.3c.1-.2.2-.375.3-.525.1-.15.225-.35.375-.6l.225-.3c.2-.3.425-.45.675-.45l.225-.225c.05-.05.075-.125.075-.225l.15-.15-.075-.075c-.3-.25-.45-.475-.45-.675-.05-.35.063-.65.338-.9s.55-.363.825-.338c.275.025.487.113.637.263l.15.15c.05 0 .075.025.075.075l.3.15v.225c.1.1.15.175.15.225.1-.15.25-.325.45-.525l.375-1.2c0-.2.05-.4.15-.6l.15-.225v-.15l.225-.9h.15l.225-.9a.933.933 0 000-.525l-.3-.75-.15-.6z"/></svg>)
                break;
            case "calvin klein":
                setIcon(<svg version="1.1" id="svg3339" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="623px" height="150px" viewBox="0 0 623 150"><path d="M227.1,108l21.2-46.6h8L227.1,125l-29.3-63.6h8.1L227.1,108z M293,61.3h-7.2v59.8h7.2V83.3c0-10.3,7.6-17,17-17 c9.4,0,16.6,7.6,16.6,17v37.8h7.2V83.3c0-13.2-10.7-23.9-23.9-23.9c-6.6,0-13.2,2.5-16.9,7.7V61.3L293,61.3z M387.5,66.9l38.1-41.4 h-9.8l-40,43.5V25.5h-7.2v95.6h7.2V79.6l0,0l6.7-7.2l0,0l34,48.7h8.8L387.5,66.9L387.5,66.9z M190.6,25.5h-7.2v95.6h7.2V25.5z M443.5,25.5h-7.2v95.6h7.2V25.5z M557.1,61.3H550v59.8h7.2V83.3c0-10.3,7.6-17,17-17c9.4,0,16.6,7.6,16.6,17v37.8h7.2V83.3 c0-13.2-10.7-23.9-23.9-23.9c-6.6,0-13.2,2.5-16.9,7.7V61.3z M137.7,115.7c-13.6,0-24.6-11-24.6-24.6s11-24.6,24.6-24.6 s24.6,11,24.6,24.6C162.3,104.7,151.3,115.7,137.7,115.7 M162.8,110.5v10.6h7.2V61.3h-7.2V72v-0.1c-5.8-7.6-14.8-12.4-25-12.4 c-17.4,0-31.5,14.1-31.5,31.5s14.1,31.5,31.5,31.5c10.2,0,19.3-4.9,25-12.4L162.8,110.5L162.8,110.5z M510,84.4h-47.3l-0.1,0.1 c2.9-10.3,12.4-18,23.7-18C497.7,66.4,507.2,74,510,84.4L510,84.4z M508.5,102c-4.1,8.1-12.4,13.6-22,13.6 c-13.4,0-24.3-10.7-24.6-24.1h0.1h56h0.1c0-0.2,0-0.3,0-0.5c0-17.4-14.1-31.5-31.5-31.5c-17.4,0-31.5,14.1-31.5,31.5 s14.1,31.5,31.5,31.5c12.4,0,23.2-7.2,28.4-17.7L508.5,102z M32.6,73.8c0-22.6,18.3-41.4,41-41.4c9.6,0,18.5,3.3,25.4,8.9l5.2-5.4 C95.9,29.1,85.2,25,73.5,25C46.7,25,25,47.1,25,73.8c0,26.8,21.7,48.8,48.5,48.8c11.6,0,22.3-4.1,30.7-10.9l-5.2-5.4 c-7,5.5-15.8,8.9-25.4,8.9C51,115.2,32.6,96.5,32.6,73.8 M272.9,61.3h-7.2v59.8h7.2V61.3z M269.5,34.2c2.4,0,4.4-2,4.4-4.4 c0-2.4-2-4.4-4.4-4.4s-4.4,2-4.4,4.4C265.1,32.2,267,34.2,269.5,34.2 M536.5,61.3h-7.2v59.8h7.2V61.3z M533,34.2 c2.4,0,4.4-2,4.4-4.4c0-2.4-2-4.4-4.4-4.4c-2.4,0-4.4,2-4.4,4.4C528.7,32.2,530.6,34.2,533,34.2"/></svg>)
                break;
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);
    return(
        <section style={{background: bgColor ? bgColor : "#FFF", color: color ? color : "#000"}} className="min-h-96 p-3 lg:px-4 2xl:px-32 flex flex-col items-start gap-3">
            {icon}
            <h2 className="font-bold text-xl">{title}</h2>
            <p>{description}</p>
            <div className="w-full overflow-x-auto">
                <div className="w-fit flex gap-2 items-center">
                {brandProducts.length !== 0 ? brandProducts.map((product, index) => {
                    if(product.variants.length === 0) return <ProductCard key={index} product={product} />
                    return product.variants.map((variant, index) => <VariantCard key={index} variant={variant} />)
                })
                : 
                <>
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                </>}
                </div>
            </div>
        </section>
    )
}

export function CollectionSection({collection}:{collection: CollectionWithProducts}){
    return(
        <section className="min-h-96 pb-5 flex flex-col items-start gap-2">
            <div className="w-full flex gap-3 lg:px-4 2xl:px-32" style={{background: collection.mainColor, paddingTop: "36px"}}>
                <img width={700} height={300} style={{width: "700px", height: "300px" ,objectFit: "contain"}} src={collection.mediaSource} alt={collection.mediaSource} className="w-20 h-20" />
                <div className="flex flex-col gap-3">
                    <h2 className="font-bold text-2xl">{collection.name}</h2>
                    <p className="text-2xl">{collection.subname}</p>
                    <p>{collection.description}</p>
                    <Link className="w-min border-2 border-black font-semibold px-3 py-2" href={`/collections/${collection.id}`}>Découvrir</Link>
                </div>
            </div>
            <div className="w-full overflow-x-auto lg:px-4 2xl:px-32">
                <div className="w-fit flex gap-2 items-center">
                {collection.products.length !== 0 ? collection.products.map((product, index) => {
                    return <ProductCard key={index} product={product} />
                })
                : 
                <>
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                    <CartLoader />
                </>}
                </div>
            </div>
        </section>
    )
}