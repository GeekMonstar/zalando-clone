"use client";

import { useEffect } from "react";
import { CartVariantCard } from "../../components/cards";
import { useCart } from "../../contexts/cartContext";

export default function Page() {
    const {cart} = useCart();
    useEffect(() => {
        document.title = `Mon panier (${cart.length > 0 ? `${cart.length} article${cart.length > 1 ? "s" : ""}`: "Aucun article"})`;
    }, [cart]);
    return (
        <div className="p-3 lg:px-4 2xl:px-32">
            <div className="flex flex-col lg:flex-row gap-2">
                <div className="lg:w-2/3">
                    <h1 className="text-2xl font-bold">Mon panier ({cart.length > 0 ? `${cart.length} article${cart.length > 1 ? "s" : ""}`: "Aucun article"})</h1>
                    <div className="flex gap-1 items-center">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" focusable="false" aria-hidden="true"><path d="m16.5 14.5-4.195-1.864a.76.76 0 0 0-.61 0L7.5 14.5l.042-7.62L9.5 1.25h5l2 5.877zM9 7.254v4.937l2.086-.926a2.26 2.26 0 0 1 1.828 0L15 12.19V7.254L13.434 2.75h-2.868z"></path><path d="M20.5 22.75h-17c-1.24 0-2.25-1.01-2.25-2.25V7.29q0-.434.161-.836l1.516-3.79A2.24 2.24 0 0 1 5.016 1.25h13.968a2.24 2.24 0 0 1 2.09 1.415l1.515 3.789c.106.265.161.546.161.835V20.5c0 1.24-1.01 2.25-2.25 2.25m-15.484-20a.75.75 0 0 0-.697.471l-1.515 3.79a.8.8 0 0 0-.054.278V20.5c0 .413.336.75.75.75h17c.413 0 .75-.337.75-.75V7.29a.7.7 0 0 0-.054-.278l-1.515-3.79a.75.75 0 0 0-.697-.472z"></path><path d="M2 7h20v1.5H2z"></path></svg>
                        <p>Envoyé par Zalando</p>
                    </div>
                    <div className="flex flex-col gap-2 mt-5">
                            {cart.map((cartItem, index) => <CartVariantCard key={index} cartItem={cartItem} />)}
                        </div>
                </div>
                <div className="lg:w-1/3">
                    <div className="w-full min-h-92 bg-zinc-100 text-black p-5">
                        <div className="w-full flex justify-between">
                            <p className="text-lg">Sous-total:</p>
                            <p className="text-lg">{cart.reduce((acc, curr) => acc + curr.variant.product.price + curr.variant.additionnalPrice, 0)/100}€</p>
                        </div>
                        <div className="w-full flex justify-between">
                            <p className="text-lg">Livraison:</p>
                            <p className="text-lg">0€</p>
                        </div>
                        <hr className="my-2" />
                        <div className="w-full flex justify-between text-lg font-bold">
                            <p>Total:</p>
                            <p>{cart.reduce((acc, curr) => acc + curr.variant.product.price + curr.variant.additionnalPrice, 0)/100}€</p>
                        </div>
                        <button className="w-full p-2 border border-black bg-black text-white font-semibold transition my-2">Commander</button>
                        <p>Nous acceptons</p>
                        <div className="flex gap-2 flex-wrap">
                            <svg width="48" height="32" viewBox="0 0 48 32" aria-hidden="true"><g fill="none"><rect width="45.333" height="29.333" x="1.333" y="1.333" fill="#FFF" rx="2"></rect><path fill="#DDD" d="M44 1.333A2.667 2.667 0 0 1 46.667 4v24A2.667 2.667 0 0 1 44 30.667H4A2.667 2.667 0 0 1 1.333 28V4A2.667 2.667 0 0 1 4 1.333zM44 0H4a4.01 4.01 0 0 0-4 4v24a4.01 4.01 0 0 0 4 4h40a4.01 4.01 0 0 0 4-4V4a4.01 4.01 0 0 0-4-4"></path><path fill="#231F20" d="M13.568 27.975V26.38a.946.946 0 0 0-1-1.01.98.98 0 0 0-.893.453.93.93 0 0 0-.84-.452.84.84 0 0 0-.744.377v-.313H9.54v2.54h.559v-1.398a.597.597 0 0 1 .621-.674c.367 0 .553.238.553.669v1.413h.559v-1.408a.598.598 0 0 1 .621-.674c.378 0 .559.238.559.669v1.413zm8.257-2.542h-.909v-.77h-.559v.77h-.504v.506h.516v1.169c0 .59.228.941.883.941.244.002.484-.068.69-.197l-.16-.473a1.03 1.03 0 0 1-.489.144c-.265 0-.366-.171-.366-.426V25.94h.904zm4.715-.064a.75.75 0 0 0-.67.372v-.308h-.547v2.54h.553V26.55c0-.42.181-.653.532-.653a.9.9 0 0 1 .345.064l.171-.532a1.2 1.2 0 0 0-.393-.07zm-7.128.266a1.9 1.9 0 0 0-1.036-.266c-.643 0-1.063.308-1.063.814 0 .414.308.669.878.749l.265.037c.303.043.447.123.447.266 0 .196-.202.308-.579.308a1.36 1.36 0 0 1-.845-.266l-.266.431c.323.225.708.34 1.1.33.734 0 1.159-.346 1.159-.83s-.335-.68-.888-.76l-.265-.037c-.239-.032-.431-.08-.431-.25s.181-.297.484-.297c.28.003.555.079.797.217zm14.805-.266a.75.75 0 0 0-.669.372v-.308H33v2.542h.553V26.55c0-.42.182-.654.532-.654a.9.9 0 0 1 .346.064l.17-.532a1.2 1.2 0 0 0-.393-.069zm-7.121 1.328a1.28 1.28 0 0 0 1.236 1.33q.06.002.12-.002c.332.018.659-.09.915-.302l-.266-.447c-.19.145-.424.225-.664.228a.817.817 0 0 1 0-1.627c.24.003.474.083.664.228l.266-.446a1.33 1.33 0 0 0-.915-.303 1.284 1.284 0 0 0-1.356 1.33zm5.176 0v-1.265h-.552v.308a.96.96 0 0 0-.797-.372 1.33 1.33 0 0 0-.015 2.657h.015a.96.96 0 0 0 .797-.372v.308h.553zm-2.056 0a.763.763 0 1 1-.001.062q-.002-.032.001-.062m-6.67-1.328a1.33 1.33 0 0 0 .031 2.659h.006c.382.02.758-.104 1.054-.345l-.265-.41c-.21.168-.47.262-.739.266a.703.703 0 0 1-.76-.622h1.887v-.212a1.21 1.21 0 0 0-1.207-1.329zm0 .495a.63.63 0 0 1 .642.616h-1.33c.02-.355.32-.63.675-.616zm13.847.839v-2.291h-.532v1.33a.96.96 0 0 0-.797-.373 1.33 1.33 0 0 0 0 2.659.96.96 0 0 0 .797-.372v.308h.532zm.923.901a.25.25 0 0 1 .239.348.26.26 0 0 1-.139.133.24.24 0 0 1-.101.022.27.27 0 0 1-.239-.155.25.25 0 0 1 0-.196.26.26 0 0 1 .247-.152zm0 .45a.191.191 0 1 0-.077-.367.2.2 0 0 0-.064.042.192.192 0 0 0 .149.324zm.016-.318a.1.1 0 0 1 .07.021.07.07 0 0 1 .023.056.07.07 0 0 1-.018.048.1.1 0 0 1-.056.024l.077.088h-.061l-.072-.088h-.024v.088h-.051v-.233zm-2.983-1.033a.763.763 0 1 1-.001.061zm-18.664.001v-1.27h-.552v.307a.96.96 0 0 0-.797-.372 1.33 1.33 0 0 0 0 2.659.96.96 0 0 0 .797-.372v.308h.554zm-2.056 0a.71.71 0 1 1-.006.065l.001-.065z"></path><path fill="#F26122" d="M19.228 6.072H27.6v15.044h-8.372z"></path><path fill="#EA1D25" d="M19.76 13.596a9.56 9.56 0 0 1 3.653-7.524C19.26 2.808 13.244 3.529 9.98 7.684s-2.544 10.17 1.61 13.433a9.57 9.57 0 0 0 11.825 0 9.55 9.55 0 0 1-3.655-7.521"></path><path fill="#F69E1E" d="M38.895 13.596c0 5.284-4.283 9.568-9.567 9.568a9.57 9.57 0 0 1-5.913-2.045c4.154-3.266 4.874-9.28 1.609-13.435a9.6 9.6 0 0 0-1.61-1.61 9.567 9.567 0 0 1 15.48 7.52z"></path></g></svg>
                            <svg width="48" height="32" viewBox="0 0 48 32" aria-hidden="true"><defs><linearGradient id="3cc__cartebleue-a" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stopColor="#1A1F46"></stop><stop offset="35.151%" stopColor="#1A1F46"></stop><stop offset="47.107%" stopColor="#2B4A83"></stop><stop offset="55.152%" stopColor="#3564A8"></stop><stop offset="60.816%" stopColor="#3464A4"></stop><stop offset="66.204%" stopColor="#326499"></stop><stop offset="71.482%" stopColor="#2F6386"></stop><stop offset="76.693%" stopColor="#2A636B"></stop><stop offset="81.806%" stopColor="#246248"></stop><stop offset="84.849%" stopColor="#206230"></stop><stop offset="100%" stopColor="#206230"></stop></linearGradient></defs><g fill="none"><rect width="48" height="32" fill="url(#3cc__cartebleue-a)" rx="3"></rect><path fill="#FFF" d="M15.026 15.323h9.822a7.07 7.07 0 0 0-2.082-5.225C20.979 8.568 17.849 8 15.052 8c-2.912 0-6.132.623-7.928 2.265A7.6 7.6 0 0 0 5.239 16a8.08 8.08 0 0 0 2.337 6.069C9.363 23.595 12.259 24 15.052 24c2.713 0 5.651-.457 7.428-1.907A7.77 7.77 0 0 0 24.864 16v-.01h-9.838zm10.482.667v7.653H39.17v-.01a3.776 3.776 0 0 0 3.59-3.77 3.875 3.875 0 0 0-3.59-3.876v.003zm17.003-4.175a3.47 3.47 0 0 0-3.496-3.495c-.134 0-.3-.025-.431-.01H25.508v7.013h13.775a3.525 3.525 0 0 0 3.228-3.508"></path></g></svg>
                            <svg width="48" height="32" viewBox="0 0 48 32" aria-hidden="true"><rect width="46.6" height="30.6" x="0.7" y="0.7" rx="3.301" fill="#fff"></rect><path d="M43.999 1.4A2.604 2.604 0 0 1 46.6 4.001V28a2.604 2.604 0 0 1-2.601 2.601H4A2.604 2.604 0 0 1 1.4 27.999V4A2.604 2.604 0 0 1 4.001 1.4zm0-1.4H4A4 4 0 0 0 0 4.001V28A4 4 0 0 0 4.001 32H44A4 4 0 0 0 48 27.999V4A4 4 0 0 0 43.999 0" fill="#ddd"></path><path d="m23.824 10.624-2.43 11.357h-2.938l2.43-11.357Zm12.36 7.333 1.548-4.265.89 4.265Zm3.279 4.024h2.717L39.81 10.624H37.3a1.34 1.34 0 0 0-1.25.833l-4.408 10.524h3.085l.612-1.696h3.77Zm-7.668-3.708c.012-2.998-4.146-3.163-4.117-4.502.009-.407.397-.84 1.246-.951a5.54 5.54 0 0 1 2.897.508l.516-2.408a7.9 7.9 0 0 0-2.748-.504c-2.904 0-4.949 1.544-4.966 3.755-.018 1.635 1.46 2.547 2.573 3.09 1.144.557 1.529.914 1.524 1.411-.008.763-.913 1.099-1.758 1.112a6.14 6.14 0 0 1-3.018-.717l-.533 2.488a8.9 8.9 0 0 0 3.268.604c3.086 0 5.106-1.525 5.116-3.886m-12.17-7.65-4.76 11.358H11.76l-2.342-9.064a1.24 1.24 0 0 0-.699-.998 12.3 12.3 0 0 0-2.898-.965l.07-.33h5a1.37 1.37 0 0 1 1.354 1.158l1.237 6.572 3.058-7.73Z" fill="#233065" fill-rule="evenodd"></path></svg>
                            <svg width="48" height="32" fill="none" viewBox="0 0 48 32" aria-hidden="true"><rect width="48" height="32" fill="#006FAC" rx="4"></rect><path fill="#FFFFFE" fill-rule="evenodd" d="M16 28a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4H20a4 4 0 0 0-4 4z" clip-rule="evenodd"></path><path fill="#006FAC" fill-rule="evenodd" d="M32.06 11.592h-2.432l1.216-2.93zm1.599 3.8h2.75l-3.953-8.955H29.31l-3.953 8.955h2.686l.742-1.791h4.12zm11.923 0H48V6.437h-3.761l-2.009 5.577-1.996-5.577H36.41v8.955h2.418V9.123l2.303 6.27h2.15l2.302-6.283zm-14.353 8.183V22.18h5.053v-2.021h-5.053v-1.395h5.18v-2.072h-7.624v8.955h7.625v-2.072zm14.312-2.427L48 23.764v-5.21zm-.751 4.5H48l-4.247-4.504L48 16.692h-3.16l-2.622 2.865-2.597-2.865H36.41l4.222 4.477-4.222 4.478h3.122l2.635-2.891zM44 32a4 4 0 0 0 4-4v-1.07h-3.86l-1.988-2.198-1.998 2.198H27.426V16.686h-4.109l5.096-11.532h4.915l1.754 3.95v-3.95h6.083l1.056 2.977 1.064-2.977H48V4a4 4 0 0 0-4-4H16v32z" clip-rule="evenodd"></path></svg>
                            <svg width="48" height="32" fill="none" viewBox="0 0 48 32" aria-hidden="true"><rect width="48" height="32" fill="#FFB3C7" rx="4"></rect><path fill="#FFB3C7" d="M0 6.667h48v19.416H0z"></path><path fill="#000" d="M38.437 15.174a2.974 2.974 0 1 0 0 4.914v.36h1.687v-5.634h-1.687zm-1.534 3.907a1.452 1.452 0 1 1 1.529-1.45 1.49 1.49 0 0 1-1.53 1.45M15.303 12.303h-1.766v8.145h1.766zM30.794 14.662a2.05 2.05 0 0 0-1.738.786v-.634h-1.68v5.634h1.7v-2.961a1.187 1.187 0 0 1 1.267-1.276c.741 0 1.168.443 1.168 1.264v2.973h1.685v-3.583c0-1.311-1.043-2.203-2.402-2.203M20.64 15.174a2.973 2.973 0 1 0 0 4.914v.36h1.687v-5.634H20.64zm-1.534 3.907a1.453 1.453 0 1 1 1.528-1.45 1.49 1.49 0 0 1-1.528 1.45M24.937 15.548v-.734h-1.728v5.634h1.731v-2.63c0-.888.962-1.365 1.63-1.365h.02v-1.64a2.1 2.1 0 0 0-1.653.734M41.915 18.45a1.058 1.058 0 1 0 0 2.116 1.058 1.058 0 0 0 0-2.116M12.32 12.301h-1.83A4.68 4.68 0 0 1 8.6 16.078l-.725.543 2.809 3.83h2.309l-2.584-3.525a6.48 6.48 0 0 0 1.912-4.625M7.65 12.301H5.819v8.15H7.65z"></path></svg>
                            <svg width="48" height="32" viewBox="0 0 48 32" aria-hidden="true"><g fill="none"><path fill="#FFF" d="M4 1.333h40c1.467 0 2.667 1.2 2.667 2.667v24c0 1.467-1.2 2.667-2.667 2.667H4A2.675 2.675 0 0 1 1.333 28V4c0-1.467 1.2-2.667 2.667-2.667"></path><path fill="#DDD" d="M44 1.333c1.467 0 2.667 1.2 2.667 2.667v24c0 1.467-1.2 2.667-2.667 2.667H4A2.675 2.675 0 0 1 1.333 28V4c0-1.467 1.2-2.667 2.667-2.667zM44 0H4C1.733 0 0 1.733 0 4v24c0 2.267 1.733 4 4 4h40c2.267 0 4-1.733 4-4V4c0-2.267-1.733-4-4-4"></path><path fill="#253B80" d="M18.533 13.467H16.4a.29.29 0 0 0-.267.266l-.8 5.334c0 .133 0 .266.134.266h.933a.29.29 0 0 0 .267-.266l.266-1.467c0-.133.134-.267.267-.267h.667q2 0 2.4-2c.133-.533 0-1.066-.267-1.333-.133-.4-.667-.533-1.467-.533m.267 2c-.133.8-.667.8-1.2.8h-.267l.267-1.334c0-.133.133-.133.133-.133h.134c.4 0 .666 0 .933.267 0-.134.133.133 0 .4m6-.134h-.933c-.134 0-.134 0-.134.134v.266L23.6 15.6q-.4-.4-1.2-.4c-1.067 0-2 .8-2.267 2-.133.533 0 1.2.4 1.467.267.4.8.533 1.2.533.934 0 1.334-.533 1.334-.533v.266c0 .134 0 .267.133.267h.933a.29.29 0 0 0 .267-.267l.533-3.466s0-.134-.133-.134m-1.333 2c-.134.534-.534.934-1.067.934-.267 0-.533-.134-.667-.267-.133-.133-.266-.4-.133-.667.133-.533.533-.933 1.067-.933.266 0 .533.133.666.267.134.133.134.4.134.666m6.666-2h-1.066c-.134 0-.134 0-.267.134l-1.333 2-.534-2a.29.29 0 0 0-.266-.267h-.934c-.133 0-.266.133-.133.267l1.067 3.2-1.067 1.466c-.133.134 0 .267.133.267h.934c.133 0 .133 0 .266-.133l3.334-4.8c.133.133 0-.134-.134-.134"></path><path fill="#179BD7" d="M33.467 13.467h-2.134a.29.29 0 0 0-.266.266l-.8 5.334c0 .133 0 .266.133.266h1.067c.133 0 .133-.133.133-.133l.267-1.467c0-.133.133-.266.266-.266h.667q2 0 2.4-2c.133-.534 0-1.067-.267-1.334-.266-.533-.8-.666-1.466-.666m.133 2c-.133.8-.667.8-1.2.8h-.267l.267-1.334c0-.133.133-.133.133-.133h.134c.4 0 .666 0 .933.267.133-.134.133.133 0 .4m6-.134h-.933c-.134 0-.134 0-.134.134v.266L38.4 15.6q-.4-.4-1.2-.4c-1.067 0-2 .8-2.267 2-.133.533 0 1.2.4 1.467.267.4.8.533 1.2.533.934 0 1.334-.533 1.334-.533v.266c0 .134 0 .267.133.267h.933a.29.29 0 0 0 .267-.267l.533-3.466c.134 0 0-.134-.133-.134m-1.333 2c-.134.534-.534.934-1.067.934-.267 0-.533-.134-.667-.267-.133-.133-.266-.4-.133-.667.133-.533.533-.933 1.067-.933.266 0 .533.133.666.267.134.133.134.4.134.666M40.8 13.6l-.8 5.467c0 .133 0 .266.133.266h.8a.29.29 0 0 0 .267-.266l.8-5.334c0-.133 0-.266-.133-.266h-.934s-.133 0-.133.133"></path><path fill="#253B80" d="m6.8 20.267.133-1.067H4.8L6 11.733h2.8c.933 0 1.6.134 2 .534.133.133.267.4.267.533v1.067L11.2 14c.133.133.267.133.267.267.4.133.533.4.533.533v.8c-.133.4-.133.667-.4.933-.133.267-.267.4-.533.667-.267.133-.4.267-.8.4-.267.133-.534.133-.934.133H9.2c-.133 0-.267 0-.4.134-.133.133-.267.266-.267.4v.133l-.266 1.733c-.134.134-1.467.134-1.467.134"></path><path fill="#179BD7" d="M11.6 13.733v.134C11.2 15.733 10 16.4 8.267 16.4h-.934q-.4 0-.4.4l-.4 2.667-.133.8c0 .133.133.266.267.266h1.466c.134 0 .267-.133.4-.266v-.134L8.8 18.4v-.133c0-.134.133-.267.4-.267h.133c1.467 0 2.534-.533 2.934-2.267.133-.666 0-1.333-.267-1.733-.133-.133-.267-.133-.4-.267"></path><path fill="#222D65" d="M11.2 13.6H7.733c-.133 0-.133.133-.133.267l-.533 3.066v.134c0-.134.266-.4.4-.4h.8c1.6 0 2.933-.667 3.333-2.534V14q-.2-.4-.4-.4"></path><path fill="#253B80" d="M7.467 13.733c0-.133.133-.266.133-.266h3.6c.133 0 .267.133.267.133q.2-1-.4-1.6c-.267-.4-1.067-.533-2.134-.533h-2.8q-.4 0-.4.4l-1.2 7.466c0 .134.134.267.267.267h1.733l.4-2.8z"></path></g></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    )
}